<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>Pimient0</title>
    <link href="pimiento.css" rel="stylesheet" type="text/css" />
    <script src="pimiento.js"></script>
    <script src="usuarios.js"></script>
</head>
<body>
    <div id="contenedor">

        <div id="cabecera">
            <div id="logo">
                <h1><a href="pimiento.html">Pimiento <img src="img/logo.png"> </a></h1>
            </div>

            <div id="identidad">
                <p>La página definitiva para los amantes de la cocina.</p>
            </div>

            <div class="clear"></div>
        </div>


        <div id="contenido">
            <div id="principal">
                    <h1>LogIn</h1>
                    <form id="login">
                        <table>
                            <tr>
                                <td>email:</td>
                                <td>
                                    <input type="text" id="email" name="email" required>
                                </td>
                            </tr>
                            <tr>
                                <td>contraseña:</td>
                                <td>
                                    <input type="password" id="contrasenia" name="contrasenia" required>
                                </td>
                            </tr>
                            <tr >
                                <td colspan="2">
                                    <input type="submit" id="ingresarBtn" value="Ingresar" onclick="return validarLogin()">
                                </td>
                            </tr>

                        </table>
                    </form>

                <p id="iniciarRegistro">¿No estas registrado?</p>

            </div>

        </div>
        
        <div class="clear"></div>
        
        <div id="pie">
            <span class="enlaces">
                <a href="pimientoLogin.html"> <img src="img/chef-cap-7.png"/> </a>
            </span>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function(){
            var iniciarRegistro= document.getElementById('iniciarRegistro');
            var divPrincipal= document.getElementById('principal');
            var registroForm= null;

            iniciarRegistro.addEventListener('click', function(){
                if(!registroForm){
                    registroForm= document.createElement('form');
                    registroForm.id= "registro";
                    registroForm.innerHTML= `
                        <h2>Registrar</h2>
                        <label>Nombre: <input type="text" id="nombreRegistro" name="nombre" required></label><br>
                        <label>email: <input type="text" id="emailRegistro" name="emailRegistro" required></label><br>
                        <label>Usuario: <input type="text" id="usuario" name="usuario" required></label><br>
                        <label>Contraseña: <input type="password" id="contraseniaRegistro" name="contrasenia" required></label><br>
                        <label>Fecha Nacimiento: <input type="number" id="dia" name="dia" placeHolder="dd" maxlength="2" required>
                            <input type="number" id="mes" name="mes" placeHolder="mm" maxlength="2" required>
                            <input type="number" id="anio" name="anio" placeHolder="aaaa" maxlength="4" required></label><br>
                        <label>Nivel de cocina(0.1-sin experiencia / 0.9-mucha experiencia): <input type="number" id="nivelCocina" name="nivelCocina" step="any" min="0.1" max="0.9" required></label><br>
                        <label>¿Cuántos platos cocinas a la semana?: <input type="number" id="cantPlatosSem" name="cantPlatosSem" required></label><br>
                        <label>Descripción de tu perfil: <textarea col="40" id="descripcionPerfil" name="descripcionPerfil"></textarea></label><br>
                        <input type="submit" id="registrarBtn" value="Registrar" >
                    `;

                    registroForm.addEventListener('submit', function(e){
                        e.preventDefault();
                        if(validarRegistro()){
                            // El registro y redirección ya se hacen dentro de validarRegistro
                            registroForm.reset();
                        }
                    });
                    
                    divPrincipal.insertBefore(registroForm, iniciarRegistro.nextSibling);
                };
            });
        });
    </script>
</body>
</html>